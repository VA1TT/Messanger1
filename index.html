<!DOCTYPE html>
<html lang="ru" data-theme="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Depth Send</title><style>
:root{--dark-blue:#0a1128;--medium-blue:#1a237e;--light-blue:#283593;--accent:#3949ab;--text:#e8eaf6;--gradient:linear-gradient(135deg,var(--light-blue)0%,var(--dark-blue)100%)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',sans-serif;background:var(--gradient);color:var(--text);height:100vh;overflow:hidden}
.glass{background:linear-gradient(135deg,rgba(255,255,255,0.1),rgba(255,255,255,0.05));backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,0.15);border-radius:20px;box-shadow:0 8px 32px rgba(0,0,0,0.3)}
.hidden{display:none!important}
#passwordScreen{position:fixed;inset:0;background:var(--gradient);display:flex;align-items:center;justify-content:center;z-index:9999}
.password-container{max-width:400px;width:90%;padding:40px}
.password-input{width:100%;padding:20px;font-size:18px;background:rgba(255,255,255,0.1);border:2px solid rgba(255,255,255,0.2);border-radius:15px;color:var(--text);text-align:center;letter-spacing:2px;font-weight:bold}
.password-input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 20px rgba(57,73,171,0.5)}
.password-btn{margin-top:20px;width:100%;padding:15px;font-size:16px}
#appContainer{display:flex;height:100vh;padding:20px;gap:20px}
.sidebar{width:300px;display:flex;flex-direction:column;gap:20px}
.user-card{padding:25px;display:flex;align-items:center;gap:20px;animation:fadeIn 0.5s}
.user-avatar{width:70px;height:70px;border-radius:50%;background:linear-gradient(45deg,var(--accent),var(--light-blue));display:flex;align-items:center;justify-content:center;font-size:28px;overflow:hidden;cursor:pointer;transition:all 0.3s;border:3px solid rgba(255,255,255,0.2)}
.user-avatar:hover{transform:scale(1.05);border-color:var(--accent)}
.user-avatar img{width:100%;height:100%;object-fit:cover}
.search-container{position:relative}
.search-input{width:100%;padding:15px 20px 15px 45px;background:rgba(255,255,255,0.08);border:2px solid rgba(255,255,255,0.1);border-radius:15px;color:var(--text);font-size:16px;transition:all 0.3s}
.search-input:focus{outline:none;border-color:var(--accent);background:rgba(255,255,255,0.12)}
.search-icon{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:var(--accent)}
.friends-list{flex:1;overflow-y:auto;padding-right:5px}
.friend-item{padding:18px;display:flex;align-items:center;gap:15px;cursor:pointer;transition:all 0.3s;border-radius:15px;margin:8px 0;animation:slideIn 0.4s}
.friend-item:hover{background:linear-gradient(90deg,rgba(57,73,171,0.2),transparent);transform:translateX(5px)}
.friend-item.active{background:linear-gradient(90deg,rgba(57,73,171,0.4),transparent)}
.add-friend-btn{background:linear-gradient(45deg,var(--accent),#5c6bc0);color:white;border:none;padding:12px 25px;border-radius:12px;cursor:pointer;display:flex;align-items:center;gap:10px;font-size:15px;transition:all 0.3s;width:100%}
.add-friend-btn:hover{transform:translateY(-2px);box-shadow:0 5px 20px rgba(57,73,171,0.4)}
.main-content{flex:1;display:flex;flex-direction:column}
.top-menu{display:flex;gap:12px;margin-bottom:20px;padding:15px;border-radius:18px}
.menu-btn{padding:14px 28px;background:linear-gradient(135deg,rgba(255,255,255,0.08),rgba(255,255,255,0.04));border:none;color:var(--text);border-radius:12px;cursor:pointer;transition:all 0.3s;display:flex;align-items:center;gap:12px;font-size:15px;font-weight:500}
.menu-btn.active{background:linear-gradient(45deg,var(--accent),var(--light-blue));box-shadow:0 4px 20px rgba(57,73,171,0.3)}
.chat-container{flex:1;display:flex;flex-direction:column}
.chat-header{padding:25px;display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
.chat-messages{flex:1;overflow-y:auto;padding:25px;display:flex;flex-direction:column;gap:15px}
.message{max-width:70%;padding:16px 20px;border-radius:20px;animation:messageAppear 0.3s ease;position:relative;background:linear-gradient(135deg,rgba(255,255,255,0.15),rgba(255,255,255,0.05));backdrop-filter:blur(10px)}
.message.sent{align-self:flex-end;background:linear-gradient(135deg,var(--accent),var(--light-blue))}
.message-text{font-size:16px;line-height:1.5}
.message-time{font-size:12px;opacity:0.7;margin-top:8px}
.message-status{position:absolute;right:15px;bottom:12px;font-size:12px}
.message-input-area{padding:20px;display:flex;gap:15px;align-items:flex-end}
.message-textarea{flex:1;padding:18px;background:rgba(255,255,255,0.08);border:2px solid rgba(255,255,255,0.1);border-radius:15px;color:var(--text);resize:none;min-height:60px;max-height:150px;font-size:16px;transition:all 0.3s}
.message-textarea:focus{outline:none;border-color:var(--accent);background:rgba(255,255,255,0.12)}
.send-btn{width:55px;height:55px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:linear-gradient(45deg,var(--accent),var(--light-blue));border:none;color:white;cursor:pointer;transition:all 0.3s}
.send-btn:hover{transform:scale(1.1);box-shadow:0 5px 20px rgba(57,73,171,0.4)}
.scroll-section{padding:25px;overflow-y:auto}
.video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-top:20px}
.video-card{aspect-ratio:16/9;border-radius:15px;overflow:hidden;position:relative;animation:fadeIn 0.5s}
.video-card video{width:100%;height:100%;object-fit:cover}
.upload-video-btn{background:linear-gradient(45deg,var(--accent),#5c6bc0);color:white;border:none;padding:15px 30px;border-radius:12px;cursor:pointer;display:flex;align-items:center;gap:12px;font-size:16px;margin-bottom:25px}
.settings-section{padding:25px}
.settings-grid{display:grid;gap:20px;max-width:600px}
.setting-item{display:flex;justify-content:space-between;align-items:center;padding:18px;background:rgba(255,255,255,0.05);border-radius:15px}
.switch{position:relative;width:60px;height:30px}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,0.1);transition:.4s;border-radius:30px}
.slider:before{position:absolute;content:"";height:22px;width:22px;left:4px;bottom:4px;background:linear-gradient(45deg,var(--accent),var(--light-blue));transition:.4s;border-radius:50%}
input:checked+.slider:before{transform:translateX(30px)}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideIn{from{transform:translateX(-20px);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes messageAppear{from{opacity:0;transform:translateY(20px)scale(0.95)}to{opacity:1;transform:translateY(0)scale(1)}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.7}}
.btn{background:linear-gradient(45deg,var(--accent),var(--light-blue));color:white;border:none;padding:14px 28px;border-radius:12px;cursor:pointer;transition:all 0.3s;position:relative;overflow:hidden}
.btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:0.5s}
.btn:hover::before{left:100%}
.btn:hover{transform:translateY(-3px);box-shadow:0 8px 25px rgba(57,73,171,0.4)}
::-webkit-scrollbar{width:8px}
::-webkit-scrollbar-track{background:rgba(255,255,255,0.05);border-radius:4px}
::-webkit-scrollbar-thumb{background:linear-gradient(var(--accent),var(--light-blue));border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:linear-gradient(var(--light-blue),var(--accent))}
.notification{position:fixed;top:25px;right:25px;padding:18px 25px;background:linear-gradient(135deg,rgba(40,53,147,0.9),rgba(26,35,126,0.9));color:white;border-radius:15px;z-index:1000;animation:slideIn 0.3s;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2)}
</style><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></head>
<body>
<div id="passwordScreen" class="glass">
<div class="password-container"><h1 style="text-align:center;margin-bottom:30px;font-size:2.8em;background:linear-gradient(45deg,var(--accent),#e8eaf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent">Depth Send</h1>
<p style="text-align:center;margin-bottom:30px;opacity:0.9">Приватный мессенджер</p>
<input type="password" id="passwordInput" class="password-input glass" placeholder="Введите пароль" autocomplete="off">
<button id="passwordSubmit" class="btn password-btn">Войти</button></div></div>
<div id="appContainer" class="hidden">
<div class="sidebar glass">
<div class="user-card"><div class="user-avatar" id="userAvatar" title="Изменить аватар"><i class="fas fa-user" id="avatarIcon"></i><input type="file" id="avatarUpload" accept="image/*" style="display:none"></div>
<div><h3 id="currentUsername">Гость</h3><p id="userStatus" style="font-size:14px;opacity:0.8"><span class="status-dot" style="display:inline-block;width:8px;height:8px;background:#4ade80;border-radius:50%;margin-right:8px"></span>Онлайн</p></div></div>
<div class="search-container"><div class="search-icon"><i class="fas fa-search"></i></div><input type="email" id="userSearch" class="search-input glass" placeholder="Поиск по email..."></div>
<button class="add-friend-btn glass" id="addFriendBtn"><i class="fas fa-user-plus"></i> Добавить друга</button>
<div class="friends-list" id="friendsList"><div style="text-align:center;padding:40px 20px;opacity:0.7"><i class="fas fa-users" style="font-size:48px;margin-bottom:20px"></i><p>Добавьте друзей для общения</p></div></div></div>
<div class="main-content glass">
<div class="top-menu glass">
<button class="menu-btn active" data-section="chats"><i class="fas fa-comments"></i><span>Чаты</span></button>
<button class="menu-btn" data-section="calls"><i class="fas fa-phone"></i><span>Звонки</span></button>
<button class="menu-btn" data-section="scroll"><i class="fas fa-play-circle"></i><span>Scroll</span></button>
<button class="menu-btn" data-section="settings"><i class="fas fa-cog"></i><span>Настройки</span></button></div>
<div class="chat-container" id="chatsSection">
<div class="chat-header"><div style="display:flex;align-items:center;gap:20px"><div class="user-avatar small"><i class="fas fa-user" id="friendAvatarIcon"></i></div>
<div><h3 id="chatWith">Выберите чат</h3><p id="chatStatus" style="font-size:14px;opacity:0.7">...</p></div></div>
<div style="display:flex;gap:12px"><button class="btn" id="callBtn" title="Голосовой звонок"><i class="fas fa-phone"></i></button>
<button class="btn" id="videoCallBtn" title="Видеозвонок"><i class="fas fa-video"></i></button></div></div>
<div class="chat-messages" id="messagesContainer">
<div class="welcome-message" style="text-align:center;padding:60px 20px"><i class="fas fa-comment-dots" style="font-size:64px;background:linear-gradient(45deg,var(--accent),var(--light-blue));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:25px"></i>
<h3 style="margin-bottom:15px">Добро пожаловать в Depth Send!</h3><p style="opacity:0.8">Найдите друга по email и начните общение</p></div></div>
<div class="message-input-area">
<textarea id="messageInput" class="message-textarea glass" placeholder="Введите сообщение..." rows="1" maxlength="350" disabled></textarea>
<button class="send-btn glass" id="sendBtn" disabled><i class="fas fa-paper-plane"></i></button></div></div>
<div class="scroll-section hidden" id="scrollSection">
<h2 style="margin-bottom:25px;font-size:24px"><i class="fas fa-play-circle" style="margin-right:12px"></i>Scroll</h2>
<button class="upload-video-btn glass" id="uploadVideoBtn"><i class="fas fa-upload"></i>Загрузить видео (1 в 24ч)</button>
<div class="video-grid" id="videosGrid"></div></div>
<div class="settings-section hidden" id="settingsSection">
<h2 style="margin-bottom:25px;font-size:24px"><i class="fas fa-cog" style="margin-right:12px"></i>Настройки</h2>
<div class="settings-grid">
<div class="setting-item glass"><span>Темная тема</span><label class="switch"><input type="checkbox" id="themeToggle" checked><span class="slider"></span></label></div>
<div class="setting-item glass"><span>Анимации</span><label class="switch"><input type="checkbox" id="animationsToggle" checked><span class="slider"></span></label></div>
<div class="setting-item glass"><span>Автоочистка чата (50 сообщ.)</span><label class="switch"><input type="checkbox" id="autoClearToggle" checked><span class="slider"></span></label></div>
<button class="btn glass" id="logoutBtn" style="margin-top:20px"><i class="fas fa-sign-out-alt"></i>Выйти</button></div></div></div></div>
<script>
"use strict";
const MESSENGER_PASSWORD="DepthSend_2024_!Secure@Password#789";
const SUPABASE_URL="https://frkmacxtiwbpnxmaofxq.supabase.co";
const SUPABASE_KEY="sb_publishable_rkaKOLf0E-2quUUztk84Fw_Y7esr1yJ";
let supabaseClient,currentUser=null,selectedFriend=null,messageCount=0,chatMessages=[];
class DepthSend{
constructor(){this.init();this.setupEventListeners()}
init(){this.checkPassword();this.initSupabase()}
initSupabase(){try{
supabaseClient=supabase.createClient(SUPABASE_URL,SUPABASE_KEY,{auth:{persistSession:true}});
console.log("Supabase инициализирован")}catch(e){console.error("Supabase error:",e)}}
checkPassword(){
const savedIP=localStorage.getItem("user_ip");
const savedTime=localStorage.getItem("login_time");
if(savedIP&&savedTime&&Date.now()-savedTime<86400000){
document.getElementById("passwordScreen").classList.add("hidden");
document.getElementById("appContainer").classList.remove("hidden");
this.showNotification("Автоматический вход по IP")}else{
document.getElementById("passwordScreen").classList.remove("hidden")}}
setupEventListeners(){
document.getElementById("passwordSubmit").addEventListener("click",()=>{this.checkPasswordInput()});
document.getElementById("passwordInput").addEventListener("keypress",(e)=>{if(e.key==="Enter")this.checkPasswordInput()});
document.getElementById("addFriendBtn").addEventListener("click",()=>{this.addFriend()});
document.getElementById("userSearch").addEventListener("keypress",(e)=>{if(e.key==="Enter")this.searchUser()});
document.getElementById("sendBtn").addEventListener("click",()=>{this.sendMessage()});
document.getElementById("messageInput").addEventListener("input",(e)=>{this.adjustTextarea(e.target)});
document.getElementById("messageInput").addEventListener("keypress",(e)=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();this.sendMessage()}});
document.getElementById("callBtn").addEventListener("click",()=>{this.startCall("audio")});
document.getElementById("videoCallBtn").addEventListener("click",()=>{this.startCall("video")});
document.getElementById("uploadVideoBtn").addEventListener("click",()=>{this.uploadVideo()});
document.getElementById("logoutBtn").addEventListener("click",()=>{this.logout()});
document.getElementById("avatarUpload").addEventListener("change",(e)=>{this.uploadAvatar(e.target.files[0])});
document.getElementById("userAvatar").addEventListener("click",()=>{document.getElementById("avatarUpload").click()});
document.querySelectorAll(".menu-btn").forEach(btn=>{btn.addEventListener("click",(e)=>{this.switchSection(e.currentTarget.dataset.section)})});
document.getElementById("themeToggle").addEventListener("change",(e)=>{this.toggleTheme(e.target.checked)});
window.addEventListener("resize",()=>{this.adjustTextarea(document.getElementById("messageInput"))})}
checkPasswordInput(){
const input=document.getElementById("passwordInput");
if(input.value===MESSENGER_PASSWORD){
localStorage.setItem("user_ip",this.getUserIP());
localStorage.setItem("login_time",Date.now());
document.getElementById("passwordScreen").classList.add("hidden");
document.getElementById("appContainer").classList.remove("hidden");
currentUser={id:"user_"+Date.now(),username:"Пользователь",email:""};
this.updateUserUI();
this.showNotification("Добро пожаловать!","success")}else{
input.value="";
this.showNotification("Неверный пароль","error")}}
getUserIP(){return Math.random().toString(36).substr(2,9)}
searchUser(){
const email=document.getElementById("userSearch").value.trim();
if(!email.includes("@")){this.showNotification("Введите корректный email","error");return}
this.showNotification(`Поиск пользователя ${email}`,"info")}
addFriend(){
const email=document.getElementById("userSearch").value.trim();
if(!email){this.showNotification("Введите email пользователя","error");return}
this.friends=this.friends||[];
const newFriend={id:"friend_"+Date.now(),name:email.split("@")[0],email:email,status:"online",lastSeen:"Только что"};
this.friends.push(newFriend);
this.renderFriends();
document.getElementById("userSearch").value="";
this.showNotification(`Запрос дружбы отправлен ${email}`,"success")}
renderFriends(){
const container=document.getElementById("friendsList");
container.innerHTML="";
if(!this.friends||this.friends.length===0){
container.innerHTML='<div style="text-align:center;padding:40px 20px;opacity:0.7"><i class="fas fa-users" style="font-size:48px;margin-bottom:20px"></i><p>Добавьте друзей для общения</p></div>';
return}
this.friends.forEach(friend=>{
const friendEl=document.createElement("div");
friendEl.className="friend-item glass";
friendEl.innerHTML=`
<div class="user-avatar small"><i class="fas fa-user"></i></div>
<div style="flex:1"><h4>${friend.name}</h4><p style="font-size:13px;opacity:0.7">${friend.email}</p></div>
<div class="status-dot" style="background:${friend.status==="online"?"#4ade80":friend.status==="away"?"#fbbf24":"#ef4444"}"></div>`;
friendEl.addEventListener("click",()=>{this.selectFriend(friend.id)});
container.appendChild(friendEl)})}
selectFriend(friendId){
if(!this.friends)return;
selectedFriend=this.friends.find(f=>f.id===friendId);
if(!selectedFriend)return;
document.querySelectorAll(".friend-item").forEach(f=>f.classList.remove("active"));
document.querySelector(`[data-user-id="${friendId}"]`)?.classList.add("active");
document.getElementById("chatWith").textContent=selectedFriend.name;
document.getElementById("chatStatus").textContent=selectedFriend.lastSeen;
document.getElementById("friendAvatarIcon").className=`fas fa-user`;
document.getElementById("messageInput").disabled=false;
document.getElementById("sendBtn").disabled=false;
this.loadMessages();
this.showNotification(`Чат с ${selectedFriend.name}`,"info")}
sendMessage(){
const input=document.getElementById("messageInput");
const text=input.value.trim();
if(!text||!selectedFriend||text.length>350){this.showNotification("Сообщение слишком длинное","error");return}
const message={id:"msg_"+Date.now(),text:text,sender:currentUser.id,receiver:selectedFriend.id,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"sent"};
chatMessages.push(message);
messageCount++;
this.renderMessage(message);
input.value="";
this.adjustTextarea(input);
setTimeout(()=>{message.status="delivered";this.updateMessageStatus(message.id,"delivered")},1000);
if(messageCount>=50&&document.getElementById("autoClearToggle")?.checked){this.clearChat()}}
renderMessage(msg){
const container=document.getElementById("messagesContainer");
const welcome=container.querySelector(".welcome-message");
if(welcome)welcome.remove();
const msgEl=document.createElement("div");
msgEl.className=`message ${msg.sender===currentUser.id?"sent":"received"} glass`;
msgEl.innerHTML=`
<div class="message-text">${msg.text}</div>
<div class="message-time">${msg.time}</div>
<div class="message-status">${msg.status==="sent"?"↓":"↓↓"}</div>`;
container.appendChild(msgEl);
container.scrollTop=container.scrollHeight}
updateMessageStatus(msgId,status){
const msg=document.querySelector(`[data-msg-id="${msgId}"]`);
if(msg){msg.querySelector(".message-status").textContent=status==="sent"?"↓":"↓↓"}}
loadMessages(){
const container=document.getElementById("messagesContainer");
container.innerHTML="";
if(chatMessages.length===0){
container.innerHTML='<div class="welcome-message" style="text-align:center;padding:60px 20px"><i class="fas fa-comment-dots" style="font-size:64px;background:linear-gradient(45deg,var(--accent),var(--light-blue));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:25px"></i><h3 style="margin-bottom:15px">Начните общение</h3><p style="opacity:0.8">Отправьте первое сообщение</p></div>'
}else{chatMessages.forEach(msg=>{this.renderMessage(msg)})}}
clearChat(){
if(confirm("Очистить всю историю чата?")){
chatMessages=[];
messageCount=0;
this.loadMessages();
this.showNotification("Чат очищен","success")}}
startCall(type){
if(!selectedFriend){this.showNotification("Выберите собеседника","error");return}
this.showNotification(`${type==="video"?"Видео":"Голосовой"} звонок ${selectedFriend.name}`,"info");
this.initiateWebRTCCall(type)}
initiateWebRTCCall(type){
this.showNotification("Инициализация звонка...","info");
setTimeout(()=>{
const peerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});
peerConnection.createOffer().then(offer=>{
peerConnection.setLocalDescription(offer);
this.showNotification("Звонок начат. Отправьте эту ссылку другу:","info");
prompt("Ссылка для звонка:",`${window.location.origin}?call=${type}&from=${currentUser.id}&to=${selectedFriend.id}`)})},1000)}
uploadVideo(){
const input=document.createElement("input");
input.type="file";
input.accept="video/*";
input.onchange=async(e)=>{
const file=e.target.files[0];
if(!file)return;
if(file.size>15*1024*1024){this.showNotification("Видео слишком большое (макс. 15 МБ)","error");return}
this.showNotification("Загрузка видео...","info");
setTimeout(()=>{
const video={id:"vid_"+Date.now(),user:currentUser.username,time:"12:30",expires:Date.now()+43200000};
this.addVideoToGrid(video);
this.showNotification("Видео загружено! Удалится через 12 часов.","success")},2000)};
input.click()}
addVideoToGrid(video){
const grid=document.getElementById("videosGrid");
const videoCard=document.createElement("div");
videoCard.className="video-card glass";
videoCard.innerHTML=`
<div style="position:absolute;inset:0;background:linear-gradient(45deg,rgba(57,73,171,0.7),rgba(26,35,126,0.7))"></div>
<div style="position:absolute;bottom:15px;left:15px;right:15px">
<div style="display:flex;justify-content:space-between;align-items:center">
<span style="font-weight:bold">${video.user}</span>
<span style="font-size:12px;opacity:0.9">${video.time}</span></div>
<p style="font-size:13px;margin-top:8px;opacity:0.9">Автоудаление через 12ч</p></div>`;
grid.prepend(videoCard);
setTimeout(()=>{videoCard.remove()},43200000)}
uploadAvatar(file){
if(!file||!file.type.startsWith("image/"))return;
const reader=new FileReader();
reader.onload=(e)=>{
document.getElementById("avatarIcon").style.display="none";
const img=document.createElement("img");
img.src=e.target.result;
img.style.width="100%";img.style.height="100%";img.style.objectFit="cover";
document.getElementById("userAvatar").innerHTML="";
document.getElementById("userAvatar").appendChild(img);
this.showNotification("Аватар обновлен","success")};
reader.readAsDataURL(file)}
updateUserUI(){
if(currentUser){
document.getElementById("currentUsername").textContent=currentUser.username;
document.getElementById("userAvatar").title=`${currentUser.username} - Изменить аватар`}}
switchSection(section){
document.querySelectorAll(".menu-btn").forEach(b=>b.classList.remove("active"));
document.querySelectorAll("[id$='Section']").forEach(s=>s.classList.add("hidden"));
document.querySelector(`[data-section="${section}"]`).classList.add("active");
document.getElementById(section+"Section").classList.remove("hidden")}
toggleTheme(dark){
document.documentElement.setAttribute("data-theme",dark?"dark":"light");
localStorage.setItem("theme",dark?"dark":"light")}
logout(){
localStorage.removeItem("user_ip");
localStorage.removeItem("login_time");
document.getElementById("appContainer").classList.add("hidden");
document.getElementById("passwordScreen").classList.remove("hidden");
document.getElementById("passwordInput").value="";
this.showNotification("Выход выполнен","info")}
adjustTextarea(textarea){
textarea.style.height="auto";
textarea.style.height=Math.min(textarea.scrollHeight,150)+"px"}
showNotification(message,type="info"){
const colors={info:"#3949ab",success:"#10b981",error:"#ef4444",warning:"#f59e0b"};
const notification=document.createElement("div");
notification.className="notification glass";
notification.style.borderLeft=`4px solid ${colors[type]}`;
notification.innerHTML=`<i class="fas fa-${type==="success"?"check":type==="error"?"exclamation":"info"}-circle" style="margin-right:10px"></i> ${message}`;
document.body.appendChild(notification);
setTimeout(()=>{notification.remove()},3000)}}
const app=new DepthSend();
</script>
