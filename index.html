<!DOCTYPE html>
<html lang="ru" data-theme="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Depth Send</title><style>
:root{--dark-blue:#0d1b2a;--medium-blue:#1b263b;--light-blue:#415a77;--accent:#778da9;--text:#e0e1dd;--gradient:linear-gradient(135deg,var(--light-blue)0%,var(--dark-blue)100%)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',sans-serif;background:var(--gradient);color:var(--text);height:100vh;overflow:hidden}
.glass{background:rgba(255,255,255,0.05);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.1);border-radius:15px}
.hidden{display:none!important}
#preloader{position:fixed;inset:0;background:var(--gradient);display:flex;align-items:center;justify-content:center;z-index:9999}
.loader{width:50px;height:50px;border:3px solid transparent;border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{100%{transform:rotate(360deg)}}
.auth-container{max-width:400px;margin:50px auto;padding:30px}
.auth-form{display:flex;flex-direction:column;gap:15px}
.auth-tabs{display:flex;gap:10px;margin-bottom:20px}
.tab-btn{padding:10px 20px;background:transparent;border:1px solid var(--accent);color:var(--text);border-radius:8px;cursor:pointer;transition:all 0.3s}
.tab-btn.active{background:var(--accent)}
.input-group{position:relative}
.input-group input{width:100%;padding:12px 40px 12px 15px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:var(--text);transition:all 0.3s}
.input-group input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(119,141,169,0.3)}
.input-group i{position:absolute;right:15px;top:50%;transform:translateY(-50%)}
.btn{background:linear-gradient(45deg,var(--light-blue),var(--accent));color:white;border:none;padding:12px 24px;border-radius:8px;cursor:pointer;transition:all 0.3s;position:relative;overflow:hidden}
.btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:0.5s}
.btn:hover::before{left:100%}
.btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,0,0,0.3)}
.app-container{display:flex;height:100vh;padding:15px;gap:15px}
.sidebar{width:280px;display:flex;flex-direction:column;gap:15px}
.user-card{padding:20px;display:flex;align-items:center;gap:15px;margin-bottom:10px}
.user-avatar{width:50px;height:50px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;font-size:20px;overflow:hidden}
.user-avatar img{width:100%;height:100%;object-fit:cover}
.search-box{position:relative;margin:10px 0}
.search-box input{width:100%;padding:10px 35px 10px 15px}
.search-box i{position:absolute;right:10px;top:50%;transform:translateY(-50%)}
.friends-list{flex:1;overflow-y:auto}
.friend-item{padding:12px 15px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:all 0.3s;border-radius:8px;margin:5px 0}
.friend-item:hover{background:rgba(255,255,255,0.1)}
.friend-item.active{background:rgba(119,141,169,0.3)}
.status-dot{width:8px;height:8px;border-radius:50%;background:#4ade80}
.status-dot.away{background:#fbbf24}
.status-dot.dnd{background:#ef4444}
.main-content{flex:1;display:flex;flex-direction:column}
.top-menu{display:flex;gap:10px;margin-bottom:15px;padding:10px;border-radius:12px}
.menu-btn{padding:10px 20px;background:rgba(255,255,255,0.05);border:none;color:var(--text);border-radius:8px;cursor:pointer;transition:all 0.3s;display:flex;align-items:center;gap:8px}
.menu-btn.active{background:var(--accent)}
.chat-container{flex:1;display:flex;flex-direction:column}
.chat-header{padding:20px;display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.chat-messages{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:10px}
.message{max-width:70%;padding:12px 16px;border-radius:18px;animation:messageAppear 0.3s ease;position:relative}
.message.sent{align-self:flex-end;background:linear-gradient(135deg,var(--light-blue),var(--accent))}
.message.received{align-self:flex-start;background:rgba(255,255,255,0.1)}
.message-time{font-size:11px;opacity:0.7;margin-top:5px}
.message-status{position:absolute;right:10px;bottom:8px}
.message-input-area{padding:15px;display:flex;gap:10px;align-items:center}
.message-input-area textarea{flex:1;padding:12px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:var(--text);resize:none;max-height:100px;transition:all 0.3s}
.message-input-area textarea:focus{outline:none;border-color:var(--accent)}
.attach-btn,.send-btn{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center}
.call-section,.search-section,.scroll-section,.settings-section{flex:1;padding:20px;overflow-y:auto}
.video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:15px}
.video-card{aspect-ratio:16/9;border-radius:12px;overflow:hidden;position:relative}
.video-card video{width:100%;height:100%;object-fit:cover}
.settings-grid{display:grid;gap:15px}
.setting-item{display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(255,255,255,0.05);border-radius:8px}
.switch{position:relative;width:50px;height:24px}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,0.1);transition:.4s;border-radius:24px}
.slider:before{position:absolute;content:"";height:16px;width:16px;left:4px;bottom:4px;background:var(--accent);transition:.4s;border-radius:50%}
input:checked+.slider:before{transform:translateX(26px)}
@keyframes messageAppear{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.fade-in{animation:fadeIn 0.3s ease}
.slide-in{animation:slideIn 0.3s ease}
@keyframes slideIn{from{transform:translateX(-20px);opacity:0}to{transform:translateX(0);opacity:1}}
</style><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></head>
<body>
<div id="preloader"><div class="loader"></div></div>
<div id="authSection" class="hidden">
<div class="auth-container glass"><div class="logo" style="text-align:center;margin-bottom:30px"><h1 style="font-size:2.5em;background:linear-gradient(45deg,var(--accent),#fff);-webkit-background-clip:text;-webkit-text-fill-color:transparent">Depth Send</h1></div>
<div class="auth-tabs"><button class="tab-btn active" data-tab="login">Вход</button><button class="tab-btn" data-tab="register">Регистрация</button></div>
<form id="loginForm" class="auth-form"><div class="input-group"><input type="text" id="loginEmail" placeholder="Email" required><i class="fas fa-user"></i></div>
<div class="input-group"><input type="password" id="loginPassword" placeholder="Пароль" required><i class="fas fa-lock"></i></div><button type="submit" class="btn">Войти</button></form>
<form id="registerForm" class="auth-form hidden"><div class="input-group"><input type="text" id="regUsername" placeholder="Имя пользователя" required><i class="fas fa-user"></i></div>
<div class="input-group"><input type="email" id="regEmail" placeholder="Email" required><i class="fas fa-envelope"></i></div>
<div class="input-group"><input type="password" id="regPassword" placeholder="Пароль" required><i class="fas fa-lock"></i></div>
<div class="input-group"><input type="password" id="regConfirmPassword" placeholder="Подтвердите пароль" required><i class="fas fa-lock"></i></div><button type="submit" class="btn">Зарегистрироваться</button></form></div></div>
<div id="appContainer" class="hidden"><div class="app-container">
<div class="sidebar glass"><div class="user-card"><div class="user-avatar" id="userAvatar"><img src="" alt="" id="avatarImg"><i class="fas fa-user" id="avatarIcon"></i></div><div><h3 id="currentUsername">Пользователь</h3><p id="userStatus" style="font-size:12px;opacity:0.8">Онлайн</p></div></div>
<div class="search-box"><input type="text" id="friendSearch" placeholder="Поиск друзей"><i class="fas fa-search"></i></div>
<div class="friends-list" id="friendsList"><div class="friend-item" data-user-id="1"><div class="user-avatar small"><i class="fas fa-user"></i></div><div><h4>Алексей</h4><p style="font-size:12px;opacity:0.7">В сети</p></div><div class="status-dot"></div></div></div></div>
<div class="main-content glass"><div class="top-menu">
<button class="menu-btn active" data-section="chats"><i class="fas fa-comments"></i> Чаты</button>
<button class="menu-btn" data-section="calls"><i class="fas fa-phone"></i> Звонки</button>
<button class="menu-btn" data-section="search"><i class="fas fa-search"></i> Поиск</button>
<button class="menu-btn" data-section="scroll"><i class="fas fa-play-circle"></i> Scroll</button>
<button class="menu-btn" data-section="settings"><i class="fas fa-cog"></i> Настройки</button></div>
<div class="chat-container" id="chatsSection"><div class="chat-header"><div style="display:flex;align-items:center;gap:15px"><div class="user-avatar small"><i class="fas fa-user"></i></div><div><h3 id="chatWith">Выберите чат</h3><p id="chatStatus" style="font-size:14px;opacity:0.7">...</p></div></div>
<div style="display:flex;gap:10px"><button class="btn" id="callBtn"><i class="fas fa-phone"></i></button><button class="btn" id="videoCallBtn"><i class="fas fa-video"></i></button><button class="btn" id="clearChatBtn"><i class="fas fa-trash"></i></button></div></div>
<div class="chat-messages" id="messagesContainer"><div class="welcome-message" style="text-align:center;padding:50px 20px"><i class="fas fa-comment-dots" style="font-size:48px;color:var(--accent);margin-bottom:20px"></i><h3>Добро пожаловать в Depth Send!</h3><p>Выберите чат для начала общения</p></div></div>
<div class="message-input-area"><button class="btn attach-btn" id="attachBtn"><i class="fas fa-paperclip"></i></button><textarea id="messageInput" placeholder="Введите сообщение..." rows="1" maxlength="350"></textarea><button class="btn send-btn" id="sendBtn"><i class="fas fa-paper-plane"></i></button></div></div>
<div class="call-section hidden" id="callsSection"><h2 style="margin-bottom:20px">История звонков</h2><div id="callsList"><div style="text-align:center;padding:40px"><i class="fas fa-phone" style="font-size:48px;opacity:0.3;margin-bottom:20px"></i><p>Нет истории звонков</p></div></div></div>
<div class="search-section hidden" id="searchSection"><h2 style="margin-bottom:20px">Поиск</h2><div class="search-box" style="margin-bottom:20px"><input type="text" id="globalSearch" placeholder="Поиск сообщений, пользователей..."><i class="fas fa-search"></i></div><div id="searchResults"></div></div>
<div class="scroll-section hidden" id="scrollSection"><h2 style="margin-bottom:20px">Scroll</h2><button class="btn" id="uploadVideoBtn" style="margin-bottom:20px"><i class="fas fa-upload"></i> Загрузить видео</button><div class="video-grid" id="videosGrid"><div class="video-card glass"><div style="position:absolute;bottom:10px;left:10px;background:rgba(0,0,0,0.7);padding:5px 10px;border-radius:6px"><p style="font-size:12px">Пример видео</p></div></div></div></div>
<div class="settings-section hidden" id="settingsSection"><h2 style="margin-bottom:20px">Настройки</h2><div class="settings-grid"><div class="setting-item"><span>Темная тема</span><label class="switch"><input type="checkbox" id="themeToggle" checked><span class="slider"></span></label></div>
<div class="setting-item"><span>Анимации</span><label class="switch"><input type="checkbox" id="animationsToggle" checked><span class="slider"></span></label></div>
<div class="setting-item"><span>Уведомления</span><label class="switch"><input type="checkbox" id="notificationsToggle" checked><span class="slider"></span></label></div>
<div class="setting-item"><span>Автоочистка чата</span><label class="switch"><input type="checkbox" id="autoClearToggle" checked><span class="slider"></span></label></div>
<button class="btn" id="logoutBtn" style="margin-top:20px"><i class="fas fa-sign-out-alt"></i> Выйти</button></div></div></div></div></div>
<script>
"use strict";
const SUPABASE_URL='https://frkmacxtiwbpnxmaofxq.supabase.co';
const SUPABASE_KEY='sb_publishable_rkaKOLf0E-2quUUztk84Fw_Y7esr1yJ';
let supabaseClient,currentUser=null,selectedFriend=null,messageCount=0,chatMessages=[];
class DepthSend{
constructor(){this.init();this.setupEventListeners();this.setupTestData()}
init(){setTimeout(()=>{document.getElementById('preloader').classList.add('hidden');document.getElementById('authSection').classList.remove('hidden')},1000)}
setupEventListeners(){
document.getElementById('loginForm').addEventListener('submit',(e)=>{e.preventDefault();this.login()});
document.getElementById('registerForm').addEventListener('submit',(e)=>{e.preventDefault();this.register()});
document.querySelectorAll('.tab-btn').forEach(btn=>{btn.addEventListener('click',(e)=>{this.switchTab(e.target.dataset.tab)})});
document.querySelectorAll('.menu-btn').forEach(btn=>{btn.addEventListener('click',(e)=>{this.switchSection(e.target.dataset.section)})});
document.querySelectorAll('.friend-item').forEach(friend=>{friend.addEventListener('click',(e)=>{this.selectFriend(friend.dataset.userId)})});
document.getElementById('sendBtn').addEventListener('click',()=>{this.sendMessage()});
document.getElementById('messageInput').addEventListener('keypress',(e)=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();this.sendMessage()}});
document.getElementById('clearChatBtn').addEventListener('click',()=>{this.clearChat()});
document.getElementById('callBtn').addEventListener('click',()=>{this.startCall('audio')});
document.getElementById('videoCallBtn').addEventListener('click',()=>{this.startCall('video')});
document.getElementById('attachBtn').addEventListener('click',()=>{this.attachFile()});
document.getElementById('uploadVideoBtn').addEventListener('click',()=>{this.uploadVideo()});
document.getElementById('logoutBtn').addEventListener('click',()=>{this.logout()});
document.getElementById('themeToggle').addEventListener('change',(e)=>{this.toggleTheme(e.target.checked)});
document.getElementById('animationsToggle').addEventListener('change',(e)=>{this.toggleAnimations(e.target.checked)});
document.getElementById('autoClearToggle').addEventListener('change',(e)=>{this.toggleAutoClear(e.target.checked)});
window.addEventListener('resize',()=>{this.adjustTextarea()})}
setupTestData(){
this.friends=[
{id:'1',name:'Алексей',status:'online',avatar:'',lastSeen:'Только что'},
{id:'2',name:'Мария',status:'away',avatar:'',lastSeen:'10 мин назад'},
{id:'3',name:'Иван',status:'dnd',avatar:'',lastSeen:'Не беспокоить'},
{id:'4',name:'Екатерина',status:'online',avatar:'',lastSeen:'В сети'}];
this.renderFriends()}
async login(){
const email=document.getElementById('loginEmail').value;
const password=document.getElementById('loginPassword').value;
if(!email||!password){this.showNotification('Заполните все поля','error');return}
this.showNotification('Вход выполнен','success');
currentUser={id:'user_'+Date.now(),username:email.split('@')[0],email:email};
this.showApp()}
async register(){
const username=document.getElementById('regUsername').value;
const email=document.getElementById('regEmail').value;
const password=document.getElementById('regPassword').value;
const confirm=document.getElementById('regConfirmPassword').value;
if(password!==confirm){this.showNotification('Пароли не совпадают','error');return}
this.showNotification('Регистрация успешна','success');
currentUser={id:'user_'+Date.now(),username:username,email:email};
this.showApp()}
showApp(){
document.getElementById('authSection').classList.add('hidden');
document.getElementById('appContainer').classList.remove('hidden');
if(currentUser){document.getElementById('currentUsername').textContent=currentUser.username}}
logout(){
currentUser=null;
document.getElementById('appContainer').classList.add('hidden');
document.getElementById('authSection').classList.remove('hidden');
this.showNotification('Выход выполнен','info')}
switchTab(tab){
document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
document.querySelectorAll('.auth-form').forEach(f=>f.classList.add('hidden'));
if(tab==='login'){
document.querySelector('[data-tab="login"]').classList.add('active');
document.getElementById('loginForm').classList.remove('hidden')
}else{
document.querySelector('[data-tab="register"]').classList.add('active');
document.getElementById('registerForm').classList.remove('hidden')}}
switchSection(section){
document.querySelectorAll('.menu-btn').forEach(b=>b.classList.remove('active'));
document.querySelectorAll('[id$="Section"]').forEach(s=>s.classList.add('hidden'));
document.querySelector(`[data-section="${section}"]`).classList.add('active');
document.getElementById(section+'Section').classList.remove('hidden')}
renderFriends(){
const container=document.getElementById('friendsList');
container.innerHTML='';
this.friends.forEach(friend=>{
const friendEl=document.createElement('div');
friendEl.className='friend-item';
friendEl.dataset.userId=friend.id;
friendEl.innerHTML=`
<div class="user-avatar small"><i class="fas fa-user"></i></div>
<div><h4>${friend.name}</h4><p style="font-size:12px;opacity:0.7">${friend.lastSeen}</p></div>
<div class="status-dot ${friend.status}"></div>`;
friendEl.addEventListener('click',()=>{this.selectFriend(friend.id)});
container.appendChild(friendEl)})}
selectFriend(userId){
selectedFriend=this.friends.find(f=>f.id===userId);
if(!selectedFriend)return;
document.querySelectorAll('.friend-item').forEach(f=>f.classList.remove('active'));
document.querySelector(`[data-user-id="${userId}"]`).classList.add('active');
document.getElementById('chatWith').textContent=selectedFriend.name;
document.getElementById('chatStatus').textContent=selectedFriend.lastSeen;
this.loadMessages();
document.getElementById('messageInput').disabled=false;
this.showNotification(`Чат с ${selectedFriend.name}`)}
sendMessage(){
const input=document.getElementById('messageInput');
const text=input.value.trim();
if(!text||!selectedFriend)return;
if(text.length>350){this.showNotification('Сообщение слишком длинное','error');return}
const message={
id:'msg_'+Date.now(),
text:text,
sender:currentUser.id,
receiver:selectedFriend.id,
time:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}),
status:'sent'};
chatMessages.push(message);
messageCount++;
this.renderMessage(message);
input.value='';
setTimeout(()=>{message.status='delivered';this.updateMessageStatus(message.id,'delivered')},1000);
if(messageCount>=50&&document.getElementById('autoClearToggle').checked){this.clearChat()}}
renderMessage(msg){
const container=document.getElementById('messagesContainer');
const welcome=container.querySelector('.welcome-message');
if(welcome)welcome.remove();
const msgEl=document.createElement('div');
msgEl.className=`message ${msg.sender===currentUser.id?'sent':'received'} fade-in`;
msgEl.innerHTML=`
<div>${msg.text}</div>
<div class="message-time">${msg.time}</div>
<div class="message-status">${msg.status==='sent'?'↓':'↓↓'}</div>`;
container.appendChild(msgEl);
container.scrollTop=container.scrollHeight}
updateMessageStatus(msgId,status){
const msg=document.querySelector(`[data-msg-id="${msgId}"]`);
if(msg){msg.querySelector('.message-status').textContent=status==='sent'?'↓':'↓↓'}}
loadMessages(){
const container=document.getElementById('messagesContainer');
container.innerHTML='';
if(chatMessages.length===0){
container.innerHTML='<div class="welcome-message" style="text-align:center;padding:50px 20px"><i class="fas fa-comment-dots" style="font-size:48px;color:var(--accent);margin-bottom:20px"></i><h3>Начните общение</h3><p>Отправьте первое сообщение</p></div>'
}else{
chatMessages.forEach(msg=>{this.renderMessage(msg)})}}
clearChat(){
if(confirm('Очистить всю историю чата?')){
chatMessages=[];
messageCount=0;
this.loadMessages();
this.showNotification('Чат очищен','success')}}
startCall(type){
if(!selectedFriend){this.showNotification('Выберите собеседника','error');return}
this.showNotification(`${type==='video'?'Видео':'Голосовой'} звонок ${selectedFriend.name}`,'info')}
attachFile(){
const input=document.createElement('input');
input.type='file';
input.accept='image/*,.pdf,.doc,.txt';
input.onchange=(e)=>{
const file=e.target.files[0];
if(file&&file.size>15*1024*1024){this.showNotification('Файл слишком большой','error');return}
this.showNotification(`Файл "${file.name}" выбран`,'info')};
input.click()}
uploadVideo(){
const input=document.createElement('input');
input.type='file';
input.accept='video/*';
input.onchange=(e)=>{
const file=e.target.files[0];
if(file&&file.size>15*1024*1024){this.showNotification('Видео слишком большое','error');return}
this.showNotification('Видео загружено','success')};
input.click()}
toggleTheme(dark){
document.documentElement.setAttribute('data-theme',dark?'dark':'light');
localStorage.setItem('theme',dark?'dark':'light')}
toggleAnimations(enabled){localStorage.setItem('animations',enabled)}
toggleAutoClear(enabled){localStorage.setItem('autoClear',enabled)}
adjustTextarea(){
const textarea=document.getElementById('messageInput');
textarea.style.height='auto';
textarea.style.height=Math.min(textarea.scrollHeight,100)+'px'}
showNotification(message,type='info'){
const types={info:'var(--accent)',success:'#10b981',error:'#ef4444',warning:'#f59e0b'};
const notification=document.createElement('div');
notification.style.cssText=`
position:fixed;top:20px;right:20px;padding:15px 20px;
background:rgba(0,0,0,0.8);color:white;border-radius:8px;
border-left:4px solid ${types[type]};z-index:1000;
animation:slideIn 0.3s ease;max-width:300px`;
notification.innerHTML=`<i class="fas fa-${type==='success'?'check':type==='error'?'exclamation':'info'}-circle"></i> ${message}`;
document.body.appendChild(notification);
setTimeout(()=>{notification.remove()},3000)}}
const app=new DepthSend();
</script></body></html>
